chrome.runtime.onMessage.addListener((function(e,o,r){var n;"checkCurrentTabDomain"===e.action&&r({isOnDomain:void chrome.tabs.query({active:!0,currentWindow:!0},(function(e){var o=e[0];if(o&&o.url){var r=new URL(o.url).hostname;console.log("domain",r),n("chat.openai.com"===r)}else n(!1)}))})})),chrome.runtime.onMessage.addListener((function(e,o,r){if("searchHistory"===e.action){if("chat.openai.com"!==window.location.hostname)return void r({error:"Not on chat.openai.com"});var n=[];try{var t=document.querySelectorAll("li[data-projection-id]");console.log("l",t),t.forEach((function(e){var o=e.querySelector("a"),r=e.querySelector("div"),t=o?o.href:null,a=r?r.innerText:null;n.push({link:t,text:a})})),r({results:n})}catch(e){r({error:e.message})}return!0}}));